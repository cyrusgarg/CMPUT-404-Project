{% extends 'base.html' %}

{% block content %}

<h2>Your Requests</h2>

<div class="requests-container">
    <h3>Local Follow Requests</h3>
    {% if requests %}
        <ul>
            <!-- Show each follow request with option to accept and decline -->
            {% for request in requests %}
                <li>
                    <a href="{% url 'identity:author-profile' author_id=request.sender.author_profile.author_id %}">
                        {{ request.sender.author_profile.display_name }}
                    </a>
                    <form action="{% url 'identity:accept' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="sender_author_id" value="{{ request.sender.author_profile.author_id }}">
                        <button type="submit">Accept</button>
                    </form>
                    <form action="{% url 'identity:decline' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="sender_author_id" value="{{ request.sender.author_profile.author_id }}">
                        <button type="submit">Decline</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No local follow requests at the moment.</p>
    {% endif %}
</div>

<div class="remote-requests-container">
    <h3>Remote Follow Requests</h3>
    {% if remote_requests %}
        <ul>
            <!-- Show each follow request with option to accept and decline -->
            {% for request in remote_requests %}
                <li>
                    <p>
                        {{ request.sender_name }}
                    </p>
                    <form action="{% url 'identity:remote-accept' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="sender_name" value="{{ request.sender_name }}">
                        <input type="hidden" name="sender_id" value="{{ request.sender_id }}">
                        <input type="hidden" name="receiver_author_id" value="{{ request.receiver.author_profile.author_id }}">
                        <button type="submit">Accept</button>
                    </form>
                    <form action="{% url 'identity:remote-decline' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="sender_name" value="{{ request.sender_name }}">
                        <input type="hidden" name="sender_id" value="{{ request.sender_id }}">
                        <input type="hidden" name="receiver_author_id" value="{{ request.receiver.author_profile.author_id }}">
                        <button type="submit">Decline</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No remote follow requests at the moment.</p>
    {% endif %}
</div>

{% endblock %}